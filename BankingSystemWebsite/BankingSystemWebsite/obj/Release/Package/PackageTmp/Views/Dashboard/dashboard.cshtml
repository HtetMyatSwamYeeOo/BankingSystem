@using System.Data;
@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>
<html lang="en">
<head>

    <script src='@Url.Content("~/Scripts/bootstrap.js")' type="text/javascript"></script>

    @{Html.RenderPartial("_importLayout"); }


    <style>
        .dashFont {
            color: #282425;
            font-weight: 500;
            font-size: 23px;
        }

        .forItemfont {
            color: #282425;
            font-weight: 400;
        }

        .dashFont1 {
            color: #282425;
            font-weight: 600;
            font-size: 13px;
            float: right;
        }
    </style>

</head>


<body>

    <!-- container section start -->
    <section id="container" class="">
        <!--Navigation-->
        @{Html.RenderPartial("_navLayout"); }
        <!--sidebar end-->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">
                <!--overview start-->
                <div class="row">
                    <div class="col-lg-12">
                        @*<h3 class="page-header"><img src="~/Image/home.png" style="height:45px;margin: 10px 0 20px;" />&nbsp;&nbsp; Dashboard</h3>*@
                        <ol class="breadcrumb">
                                <li style="font-size:16px; font-weight:500;"><i class="fa fa-laptop"></i>Dashboard</li>
                            </ol>
                    </div>
                </div><br />

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="info-box blue-bg" style="background-color:#4093ad">
                            <div class="count">
                                <img src="~/Image/sale.png" style="height:50px;">
                                &nbsp;&nbsp;&nbsp;
                                <label class="control-label dashFont" id="todaysale">0</label>
                            </div>
                            <div class="dashFont1" style="float:right;">TodaySaleAmount </div>
                        </div><!--/.info-box-->
                    </div><!--/.col-->

                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="info-box brown-bg" style="background-color:#e1b16a">
                            <div class="count">
                                <img src="~/Image/bill.png" style="height:50px; ">
                                &nbsp;&nbsp;&nbsp;
                                <label class="control-label dashFont" id="todaypurchase">0</label>
                            </div>
                            <div class="dashFont1" style="float:right;">TodayPurchaseAmount</div>
                        </div>

                    </div><!--/.col-->

                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="info-box dark-bg " style="background-color:#63b2a2">
                            <div class="count">
                                <img src="~/Image/today summary .png" style="height:50px; ">
                                &nbsp;&nbsp;&nbsp;
                                <label class="control-label dashFont" id="todaygeneralexp">0</label>
                            </div>
                            <div class="dashFont1" style="float:right;">TodayGeneralExpense</div>
                        </div><!--/.info-box-->
                    </div><!--/.col-->

                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="info-box dark-bg " style="background-color:#ce5a57">
                            <div class="count">
                                <img src="~/Image/item.png" style="height:50px; ">
                                &nbsp;&nbsp;&nbsp;
                                <label class="control-label forItemfont" id="todaybestselling">No Item</label>
                            </div>
                            <div class="dashFont1" style="float:right;">BestSellingProduct</div>
                        </div><!--/.info-box-->
                    </div><!--/.col-->

                </div><!--/.row-->
                <br /><br />




                <div class="row">
                    <div class="col-sm-12">

                        <div class="header1 dashFont " style="background-color:#E1B16A" ; padding:10px 10px;">
                            @*<h2><strong>@ViewRes.SharedString.TodayInvoiceList</strong></h2>*@
                        </div>

                        <header class="panel-heading"></header>
                        <div class="table table-responsive">
                            @*@{Html.RenderAction("DisplayPartialResult", "_reportTableLayout", (VEM_InventoryCommon.Constants.IndexViewModel)TempData["Dataset"]);}*@
                        </div>
                    </div>
                </div>



                <!-- project team & activity start -->
                <div class="row">


                    <div class="col-md-6 portlets">


                        <div class="panel panel-default">
                            <div class="header1 dashFont" style="background-color:#4093ad; height:150px;padding:30px 20px;">
                                <h2><strong>Calendar</strong></h2>


                            </div><br /><br />
                            <div class="panel-body">
                                <!-- Widget content -->
                                <!-- Below line produces calendar. I am using FullCalendar plugin. -->
                                <div id="calendar"></div>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 portlets">
                        <div class="panel panel-default">

                            <div class="body-cover">
                                <div id="myDIV" class="header1 dashFont" style="background-color:#63b2a2 ">
                                    <h2 style="margin:3px;"><strong>ToDoList</strong></h2><br />
                                    <div class="col-lg-12">

                                        <input type="text" id="myInput" placeholder="Todo"
                                               style="border: none;
                                              width: 75%;
                                              padding: 10px;
                                              float: left;
                                              color:black;
                                              font-size:16px;">


                                        <span onclick="newElement()" class="addBtn">Add</span>

                                    </div>
                                </div>
                            </div>

                            <section class="panel">
                                <ul id="myUL" class="unlist" style="margin: 0; padding: 0;"></ul>
                            </section>


                        </div>
                    </div>
                </div>




                <br /><br />

            </section>
            <hr />

        </section>
    </section>

    <!--main content end-->



    <script>


        //knob
        $(function () {
            $(".knob").knob({
                'draw': function () {
                    $(this.i).val(this.cv + '%')
                }
            })
        });

        //carousel
        $(document).ready(function () {
            $("#owl-slider").owlCarousel({
                navigation: true,
                slideSpeed: 300,
                paginationSpeed: 400,
                singleItem: true

            });
        });

        //custom select box

        $(function () {
            $('select.styled').customSelect();
        });






        var barChartData = {
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [
				{
				    fillColor: "rgba(220,220,220,0.5)",
				    strokeColor: "rgba(220,220,220,1)",
				    data: [65, 59, 90, 81, 56, 55, 40]
				},
				{
				    fillColor: "rgba(151,187,205,0.5)",
				    strokeColor: "rgba(151,187,205,1)",
				    data: [28, 48, 40, 19, 96, 27, 100]
				}
            ]

        }

        //-----------------------------------Calendar--------------------------//
        $(document).ready(function () {
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();
            var calendar = $('#calendar').fullCalendar({
                header: {
                    left: ' prev, today',
                    center: 'title',
                    right: 'next'
                },
                selectable: true,
                selectHelper: true,

            });
        });

        //-----------------------------Calendar-------------------------------//





        //---------------------------To Do List--------------------------------------------//
        var j;
        var i;
        var closeno;
        // Create a "close" button and append it to each list item
        var myNodelist = document.getElementById('myUL').getElementsByTagName('li');
        //var mylist = document.getElementById("#myUL");

        for (i = 0; i < myNodelist.length; i++) {
            var span = document.createElement("SPAN");
            var txt = document.createTextNode("\u00D7");
            span.className = "closed";
            span.appendChild(txt);
            myNodelist[i].appendChild(span);
        }

        // Click on a close button to hide the current list item
        var close = document.getElementsByClassName("closed");


        for (j = 0; j < close.length; j++) {
            closeno = j;
           // alert("(close no) is " + closeno);
            close[j].onclick = function () {

                var div = this.parentElement;
                var index = closeno;
                //alert("Index number(close no) is " + index);
                $.ajax({
                    url: '@Url.Action("DeleteList", "Dashboard")',
                    type: 'GET',
                    data: { checklistindex: index },
                    success: function (result1) {
                        //alert(result1);

                    }
                });
                div.style.display = "none";
            }
        }


        var closeNo;
        $("#myUL").on('click', 'li', function () {

            //-------^^---------^^^^^ // .on method is used to bind the event on dynamic elements

            $(this).toggleClass('checked');

            var checkedValue = $(this).text();
            var strlength = checkedValue.length - 1;
            var realcheck = checkedValue.substring(0, strlength);
            //alert(realcheck);
            var checkClass = $(this).attr('class');
            //alert(checkClass);
            if (checkClass === "checked") {
                $.ajax({
                    url: '@Url.Action("SetCheckList", "Dashboard")',
                    type: 'GET',
                    data: { checklist: realcheck },
                    success: function (checkList) {
                        // alert(result1);

                    }
                });
            }
            else if (checkClass == "") {
                $.ajax({
                    url: '@Url.Action("ClearCheckList", "Dashboard")',
                    type: 'GET',
                    data: { checklist: realcheck },
                    success: function (checkList) {
                        // alert(result1);

                    }
                });
            }

            @*else {
                $.ajax({
                    url: '@Url.Action("DeleteList", "Dashboard")',
                    type: 'GET',
                    data: { checklist: realcheck },
                    success: function (result1) {
                        //alert(result1);

                    }
                });
            }*@
        });







        var closeIndex;
        var k;
        var tempindex;
        // Create a new list item when clicking on the "Add" button
        function newElement() {
            var li = document.createElement("li");
            var inputValue = document.getElementById("myInput").value;

            $.ajax({
                url: '@Url.Action("GetDoList", "Dashboard")',
                type: 'GET',
                data: { dolist: inputValue },
                success: function (result1) {
                }
            });


            var t = document.createTextNode(inputValue);

            if (inputValue === '') {
                toastr.warning("WriteSomething");
               // alert("You must write something!");
            } else {
                li.appendChild(t);
                document.getElementById("myUL").appendChild(li);
            }
            document.getElementById("myInput").value = "";

            var span = document.createElement("SPAN");
            var txt = document.createTextNode("\u00D7");
            span.className = "closed";
            span.id = close.length;
            span.appendChild(txt);
            li.appendChild(span);


            for (var k = 0; k < close.length; k++) {
                //  closeIndex = 0;
                closeIndex = k;
                var c = k;
                //alert("CloseLengt" + k);

                close[k].onclick = function () {
                    //alert("CloseFunction" + c);
                    var div = this.parentElement;
                    var index = $(this).attr('id');
                    //var temp = this.parentElement;
                    //alert("Temp is " +);


                    $.ajax({
                        url: '@Url.Action("DeleteList", "Dashboard")',
                        type: 'GET',
                        data: { checklistindex: index },
                        success: function (result1) {
                            return;
                        }
                    });

                    div.style.display = "none";

                }
            }
        }


        //---------------------------To Do List--------------------------------------------//

        var l;
        var checklistIndex;
        var j;
        var i;
        $(document).ready(function () {
            //GetList
            $.ajax({
                url: '@Url.Action("GetDoList1", "Dashboard")',
                type: 'GET',
                success: function (result1) { //Success GetList

                    $.ajax({ //Get CheckList
                        url: '@Url.Action("GetCheckList", "Dashboard")',
                        type: 'GET',

                        success: function (getcheck) { //Success GetCheck

                            //alert("Result1 Length=" + result1.length + " GetCheck length" + getcheck.length);
                            if (getcheck.length > 0) {
                                //alert("getcheck.lenght is greater than 0")
                                for (j = 0; j < result1.length; j++) {//ForLoop result1
                                    //alert(result1[j]);
                                    // alert(result1[0] + "" + getcheck[0]);
                                    var li = document.createElement("li");
                                    var t = document.createTextNode(result1[j]);
                                    li.appendChild(t);
                                    document.getElementById("myUL").appendChild(li);
                                    //document.getElementById("myInput").value = "";

                                    var span = document.createElement("SPAN");
                                    var txt = document.createTextNode("\u00D7");
                                    span.className = "closed";
                                    span.appendChild(txt);
                                    li.appendChild(span);
                                    for (var i = 0; i < getcheck.length; i++) {
                                        if (result1[j] === getcheck[i]) {
                                            $(li).toggleClass('checked');
                                        }//end if
                                    }
                                    for (var l = 0; l < close.length; l++) {

                                        checklistIndex = l;
                                        close[l].onclick = function () {

                                            var div = this.parentElement;
                                            var index = $(this).attr('id');
                                            //alert(index);
                                            $.ajax({
                                                url: '@Url.Action("DeleteList", "Dashboard")',
                                                type: 'GET',
                                                data: { checklistindex: index },
                                                success: function (result1) {
                                                    return;

                                                }
                                            });
                                            div.style.display = "none";

                                        }//close
                                    }//forloop

                                }

                            }
                            else {
                                //alert("There is no getcheck list")
                                for (j = 0; j < result1.length; j++) {

                                    var li = document.createElement("li");
                                    var t = document.createTextNode(result1[j]);
                                    li.appendChild(t);
                                    document.getElementById("myUL").appendChild(li);
                                    //document.getElementById("myInput").value = "";

                                    var span = document.createElement("SPAN");
                                    var txt = document.createTextNode("\u00D7");
                                    span.className = "closed";
                                    span.appendChild(txt);
                                    li.appendChild(span);


                                    for (l = 0; l < close.length; l++) {
                                        checklistIndex = l;
                                        close[l].onclick = function () {

                                            var div = this.parentElement;
                                            var index = $(this).attr('id');
                                            //alert(index);
                                            $.ajax({
                                                url: '@Url.Action("DeleteList", "Dashboard")',
                                                type: 'GET',
                                                data: { checklistindex: index },
                                                success: function (result1) {
                                                    return;

                                                }
                                            });
                                            div.style.display = "none";

                                        }//close
                                    }//forloop
                                }
                            }//Forloop result1
                        }

                    });//Get CheckList






                }//Success GetList







            });
            //GetList

        });



        //Today Sale
        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetTodaySaleAmount", "Dashboard")',
                type: 'GET',
                data: {},
                success: function (result1) {


                    $("#todaysale").text(result1.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
                }


            });
        })

        //Today Purchase
        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetTodayPurchaseAmount", "Dashboard")',
                type: 'GET',
                data: {},
                success: function (result1) {
                    //alert(result1);
                    $("#todaypurchase").text(result1.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
                }


            });
        })


        //Today GeneralExpense

        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetTodayGeneralExpAmount", "Dashboard")',
                type: 'GET',
                data: {},
                success: function (result1) {
                    //alert(result1);
                    $("#todaygeneralexp").text(result1.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
                }


            });

        })

        //Today Best Selling Product
        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetTodayBestSellingProduct", "Dashboard")',
                type: 'GET',
                data: {},
                success: function (result1) {
                    //alert(result1);
                    $("#todaybestselling").text(result1);
                }


            });

        })

    </script>



</body>
</html>
