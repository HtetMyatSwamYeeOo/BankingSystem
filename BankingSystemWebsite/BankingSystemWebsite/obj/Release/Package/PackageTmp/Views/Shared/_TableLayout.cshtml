@using System.Resources;

<style>
    #table_header > th {
        color: #fff
    }
</style>

<section class="panel">

    <div class="table">


        <table class="table table-responsive" id="_table" runat="server" style="">

            <thead>

                @if (Model.Items != null)
                {
                    <tr id="table_header" style="background-color: #4CAF50; ">
                        <th></th>
                        @for (int i = 0; i < Model.Items.Tables[0].Columns.Count && Model.Items.Tables[0].Rows.Count > 0; i++)
                        {
                            string str = (string)Model.Items.Tables[0].Columns[i].ColumnName;
                            if (str != "" && str != null && str != " ")
                            {

                                if (Model.Items.Tables[0].Columns[i].ColumnName == "Sale Assign Item Name" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "Sale Assign Quantity")

                                {
                                    <th style="text-align:left;"> str</th>
                                }



                                if (Model.Items.Tables[0].Columns[i].ColumnName == "SubTotal" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "Receiveable Amount" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "PayableAmount" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "Payable Amount" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "BalanceDue" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "AccountReceiveable" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "Amount")
                                {
                                    <th style="text-align:right;">@str</th>
                                }

                                @*else if (Model.Items.Tables[0].Columns[i].ColumnName == "IBAN_ID")
                                {
                                    <th style="display:none"></th>
                                }*@

                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "Status")
                                {
                                    if (i == 4)
                                    {
                                        <th>@str</th>
                                    }
                                    else
                                    {
                                        <th>@str</th>
                                    }
                                }


                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "QuantityAdjustment" ||
                                        Model.Items.Tables[0].Columns[i].ColumnName == "Quantity Adjustment" ||
                                        Model.Items.Tables[0].Columns[i].ColumnName == "AvailableStock" ||
                                       Model.Items.Tables[0].Columns[i].ColumnName == "QuantityAvailable")
                                {
                                    <th style="text-align:center;">@str</th>
                                }

                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "Unit Price" ||
                                        Model.Items.Tables[0].Columns[i].ColumnName == "Total Sale Price" ||
                                        Model.Items.Tables[0].Columns[i].ColumnName == "Bill Amount" ||
                                        Model.Items.Tables[0].Columns[i].ColumnName == "Bill_BalanceDue" ||
                                       Model.Items.Tables[0].Columns[i].ColumnName == "Invoice Amount")
                                {
                                    <th style="text-align:right;">@str</th>
                                }
                                else
                                {
                                    <th>@str</th>
                                }
                            }
                            else
                            {
                                if (Model.Items.Tables[0].Columns[i].ColumnName == "SubTotal" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "Receiveable Amount" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "Payable Amount" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "PayableAmount" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "BalanceDue" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "AccountReceiveable" ||
                                      Model.Items.Tables[0].Columns[i].ColumnName == "Amount")
                                {
                                    <th style="text-align:right;">@Model.Items.Tables[0].Columns[i].ColumnName</th>
                                }

                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "QuantityAdjustment" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "Quantity Adjustment" ||
                                    Model.Items.Tables[0].Columns[i].ColumnName == "AvailableStock" ||
                                   Model.Items.Tables[0].Columns[i].ColumnName == "QuantityAvailable")
                                {
                                    <th style="text-align:center;">@Model.Items.Tables[0].Columns[i].ColumnName</th>
                                }


                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "Unit Price" ||
                                            Model.Items.Tables[0].Columns[i].ColumnName == "Inventory Asset Value" ||
                                            Model.Items.Tables[0].Columns[i].ColumnName == "Total Sale Price" ||
                                            Model.Items.Tables[0].Columns[i].ColumnName == "Bill Amount" ||
                                            Model.Items.Tables[0].Columns[i].ColumnName == "Bill_BalanceDue" ||
                                           Model.Items.Tables[0].Columns[i].ColumnName == "Invoice Amount")
                                {
                                    <th style="text-align:right;">@Model.Items.Tables[0].Columns[i].ColumnName</th>
                                }

                                else if (Model.Items.Tables[0].Columns[i].ColumnName == "Contact_ID")
                                {
                                    <th style="display:none"></th>
                                }

                                else
                                {
                                    <th> @Model.Items.Tables[0].Columns[i].ColumnName</th>
                                }
                            }
                        }
                    </tr>
                }

            </thead>

            <tbody>

                @if (Model.Items == null)
                {
                    <tr>
                        <td>There is no items for this option.</td>
                    </tr>
                }
                else if (Model.Items.Tables[0].Rows.Count > 0)
                {
                    for (int i = 0; i < Model.Items.Tables[0].Rows.Count; i++)
                    {

                        //declaring Custom Id
                        var str = Model.Items.Tables[0].Rows[i][0];

                        // if (Model.Items.Tables[0].Rows[i][0] == )

            <tr>

                <td class="col-lg-1">
                    <label class="container1" style="width:20px;">
                        <input id='@str' type="checkbox"> <!-- checked="checked"-->
                        <span class="checkmark"></span>
                    </label>
                </td>


                @for (int j = 0; j < Model.Items.Tables[0].Columns.Count; j++)
                {
                    @*if (Model.Items.Tables[0].Columns[j].ColumnName == "Name")
                    {
                        <td style="width:150px;">
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][1], "tranHistory", "TranHistory", new { tt = (string)@Model.Items.Tables[0].Rows[i][0] }, new { @style = "width:150px;" })
                        </td>
                    }*@

                    if (Model.Items.Tables[0].Columns[j].ColumnName == "IBAN_ID")
                    {
                        <td style="width:150px;">
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i]["IBAN_ID"], "editBankAccountByID", "EditBankAccount", new { id = (string)@Model.Items.Tables[0].Rows[i]["IBAN_ID"] }, new { @style = "width:150px;" })
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Email")
                    {
                        <td>
                            <div style="width:100px; word-wrap: break-word"> @Model.Items.Tables[0].Rows[i][5]</div>
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Return Sale ID")
                    {
                        <td class="col-lg-2">
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][0], "_saleReturnPopupLayoutFun", "_itemPopupLayout", new { sale = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Sale_Assign_ID")
                    {
                        <td class="col-lg-2">
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][0], "_saleAssignPopupLayoutFun", "_itemPopupLayout", new { sale = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Return Sale Date")
                    {
                        <td class="col-lg-2">
                            @{
                                DateTime date = Model.Items.Tables[0].Rows[i][j];
                                string strdate = date.ToString("dd/MM/yyyy");
                            }
                            @strdate

                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Sale Assign Date")
                    {
                        <td class="col-lg-2">
                            @{
                                DateTime date = Model.Items.Tables[0].Rows[i][j];
                                string strdate = date.ToString("dd/MM/yyyy");
                            }
                            @strdate
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Created Date")
                    {

                        <td class="col-lg-2">
                            @{
                                DateTime date = Model.Items.Tables[0].Rows[i][j];
                                string strdate = date.ToString("dd/MM/yyyy");
                            }
                            @strdate
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Issue Item ID")
                    {
                        <td class="col-lg-2">
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][0], "_issueItem_Popup_layout", "_itemPopupLayout", new { incoming_id = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Sale Assign Item ID")
                    {
                        <td>
                            <div style="text-align:left;"> @Model.Items.Tables[0].Rows[i][0]</div>
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Sale Assign Item Name")
                    {
                        <td>
                            <div style="text-align:left;"> @Model.Items.Tables[0].Rows[i][1]</div>
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Quantity")
                    {
                        <td>
                            <div style="text-align:center;"> @Model.Items.Tables[0].Rows[i][4]</div>
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "OrderNo")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeinvoicePaymentBySaleID", "SaleOrderPreview", new { onum = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Expenses#")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "editGeneralExpByID", "GeneralExpensePreviews", new { exp = (int)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "SaleOrder#")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeinvoicePaymentByID", "SaleOrderPreview", new { aa = (string)@Model.Items.Tables[0].Rows[i][0] }, null)

                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "InvoiceNo")
                    {
                        <td>

                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeinvoicePaymentByID", "SaleOrderPreview", new { aa = (string)@Model.Items.Tables[0].Rows[i][0] }, null)

                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "PurchaseOrder#" && j == 3)
                    {
                        <td>

                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeBillPaymentByID", "PurchaseOrderPreview", new { po = (string)@Model.Items.Tables[0].Rows[i][0] }, null)

                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "PurchaseOrder#" && Model.Items.Tables[0].Columns[j - 1].ColumnName == "BillNo")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeBillPaymentByID", "PurchaseOrderPreview", new { po = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "PurchaseOrder#")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeBillPaymentByPurchaseID", "PurchaseOrderPreview", new { pop = (string)@Model.Items.Tables[0].Rows[i][0] }, null)
                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "BillNo")
                    {
                        <td>
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][j], "makeBillPaymentByID", "PurchaseOrderPreview", new { po = (string)@Model.Items.Tables[0].Rows[i][0] }, null)

                        </td>
                    }


                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Date" ||
                        Model.Items.Tables[0].Columns[j].ColumnName == "Purchase Date" ||
                        Model.Items.Tables[0].Columns[j].ColumnName == "PurchaseDate" ||
                        Model.Items.Tables[0].Columns[j].ColumnName == "Bill Date" ||
                        Model.Items.Tables[0].Columns[j].ColumnName == "BillDate" ||
                        Model.Items.Tables[0].Columns[j].ColumnName == "InvoiceDate"
                        )

                    {
                        <td>

                            @{
                                DateTime date = Model.Items.Tables[0].Rows[i][j];
                                string strdate = date.ToString("dd/MM/yyyy");
                            }
                            @strdate

                        </td>
                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "ProductName")
                    {
                        <td>

                            @*<a class="link" href="\ItemOverview\itemOverview\@Model.Items.Tables[0].Rows[i][0]">
                        @Model.Items.Tables[0].Rows[i][1]
                    </a>
                            *@
                            @Html.ActionLink((string)@Model.Items.Tables[0].Rows[i][1], "itemDetail", "ItemOverview", new { pn = (string)@Model.Items.Tables[0].Rows[i][0] }, null)

                        </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Receiveable Amount" ||
                             Model.Items.Tables[0].Columns[j].ColumnName == "ReceiveableAmount" ||
                            Model.Items.Tables[0].Columns[j].ColumnName == "Payable Amount" ||
                            Model.Items.Tables[0].Columns[j].ColumnName == "PayableAmount" ||
                            Model.Items.Tables[0].Columns[j].ColumnName == "AccountReceiveable"

                           )
                    {

                        long amt;

                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            amt = 0;
                        }
                        else
                        {
                            amt = Convert.ToInt64(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td style="padding-right:30px;"> <div style="text-align:right;">@string.Format("{0:N0}", amt)</div>  </td>


                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Status")
                    {

                        if (j == 4)
                        {
                            string status = Model.Items.Tables[0].Rows[i][j];
                            if (status == "UNPAID/Sale" || status == "Unpaid/Sale" || status == "unpaid/Sale" || status == "UNPAID")
                            {
                                <td> Unpaid </td>
                            }
                            else if (status == "UNPAID/OldSale" || status == "Unpaid/OldSale" || status == "unpaid/OldSale")
                            {
                                <td> UnpaidOldSale </td>
                            }
                            else if (status == "PAID/OldSale" || status == "paid/OldSale" || status == "Paid/OldSale")
                            {
                                <td> PaidOldSale </td>
                            }
                            else if (status == "UNPAID/Purchase" || status == "Unpaid/Purchase" || status == "unpaid/Purchase" || status == "UNPAID")
                            {
                                <td> Unpaid </td>
                            }
                            else if (status == "UNPAID/OldPurchase" || status == "Unpaid/OldPurchase" || status == "unpaid/OldPurchase")
                            {
                                <td> UnpaidOldPurchase </td>
                            }
                            else if (status == "PAID/OldPurchase" || status == "paid/OldPurchase" || status == "Paid/OldPurchase")
                            {
                                <td> PaidOldPurchase </td>
                            }

                            else
                            {
                                <td> Paid  </td>
                            }

                        }



                        else
                        {

                            string status = Model.Items.Tables[0].Rows[i][j];
                            if (status == "UNPAID/Sale" || status == "Unpaid/Sale" || status == "unpaid/Sale" || status == "UNPAID")
                            {
                                <td> Unpaid </td>
                            }
                            else if (status == "UNPAID/OldSale" || status == "Unpaid/OldSale" || status == "unpaid/OldSale")
                            {
                                <td> UnpaidOldSale </td>
                            }
                            else if (status == "PAID/OldSale" || status == "paid/OldSale" || status == "Paid/OldSale")
                            {
                                <td> PaidOldSale </td>
                            }
                            else
                            {
                                <td> Paid  </td>
                            }
                        }


                    }
                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "SubTotal" ||
                             Model.Items.Tables[0].Columns[j].ColumnName == "BalanceDue")
                    {

                        long amt;

                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            amt = 0;
                        }
                        else
                        {
                            amt = Convert.ToInt64(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td> <div style="text-align:right;">@string.Format("{0:N0}", amt)</div>  </td>

                    }


                    else if (
                            Model.Items.Tables[0].Columns[j].ColumnName == "Amount")
                    {
                        long amt;

                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            amt = 0;
                        }
                        else
                        {
                            amt = Convert.ToInt64(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td> <div style="text-align:right;">@string.Format("{0:N0}", amt)</div>  </td>

                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Amount" && j == 2)
                    {
                        long amt;
                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            amt = 0;
                        }
                        else
                        {
                            amt = Convert.ToInt64(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td style="padding-right:5em;"> <div style="text-align:right;">@string.Format("{0:N0}", amt)</div>  </td>
                    }


                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "QuantityAdjustment")
                    {
                        long amt;

                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            amt = 0;
                        }
                        else
                        {
                            amt = Convert.ToInt64(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td> <div style="text-align:right;">@amt</div>  </td>
                    }

                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Discount Percent")
                    {
                        String ans;

                        if (Model.Items.Tables[0].Rows[i][j] == null)
                        {
                            ans = "";
                        }
                        else
                        {
                            ans = Convert.ToString(Model.Items.Tables[0].Rows[i][j]);
                        }


                        <td> <div style="text-align:center;">@ans</div>  </td>
                    }


                    else if (Model.Items.Tables[0].Columns[j].ColumnName == "Contact Type")
                    {
                        //aa
                        string type = Model.Items.Tables[0].Rows[i][j];
                        if (type == "Customer" || type == "customer")
                        {
                            <td><div>Customer</div></td>
                        }
                        else if (type == "Vendor" || type == "vendor")
                        {
                            <td><div>Vendor</div></td>
                        }
                        else if (type == "Dealer" || type == "dealer")
                        {
                            <td><div>Dealer</div></td>
                        }
                        else if (type == "Outlet" || type == "outlet")
                        {
                            <td><div>Outlet</div></td>
                        }
                        else if (type == "SubDealer" || type == "subdealer")
                        {
                            <td><div>Subdealer</div></td>
                        }
                        else if (type == "Busline" || type == "busline")
                        {
                            <td><div>Busline</div></td>
                        }
                        else if (type == "OEM" || type == "oem")
                        {
                            <td><div>OEM</div></td>
                        }
                        else if (type == "Marketing" || type == "marketing")
                        {
                            <td><div>Marketing</div></td>
                        }
                        else if (type == "Shop" || type == "shop")
                        {
                            <td><div>Shop</div></td>
                        }


                    }

                    else
                    {
                        <td align="left"> @Model.Items.Tables[0].Rows[i][j] </td>
                    }
                }
            </tr>
                    }
                }
                else
                {
                    <tr>
                        There is no items for this option.
                    </tr>
                }


            </tbody>


        </table>

    </div>

    <div>
        <center>
            @if (Model.Pager.EndPage > 1 && Model.Items.Tables[0].Rows.Count != 0)
            {
                <ul class="pagination">
                    @if (Model.Pager.CurrentPage > 1)
                    {
                        <li>
                            <a href="~/@(Model.controller)/Index1">First</a>
                        </li>
                        <li>
                            <a href="~/@(Model.controller)/Index1?page=@(Model.Pager.CurrentPage - 1)">Previous</a>
                        </li>
                    }

                    @for (var page = Model.Pager.StartPage; page <= Model.Pager.EndPage; page++)
                    {
                        <li class="@(page == Model.Pager.CurrentPage ? "active" : "")">
                            <a href="~/@(Model.controller)/Index1?page=@page">@page</a>
                        </li>
}

                    @if (Model.Pager.CurrentPage < Model.Pager.TotalPages)
                    {
                        <li>
                            <a href="~/@(Model.controller)/Index1?page=@(Model.Pager.CurrentPage + 1)">Next</a>
                        </li>
                        <li>
                            <a href="~/@(Model.controller)/Index1?page=@(Model.Pager.TotalPages)">Last</a>
                        </li>
                    }
                </ul>
            }
        </center>
    </div>



    <script type="text/javascript">

        $(document).ready(function () {
            $(":checkbox").find("option").attr("selected", false);
        });

        $(document).on('change', ":checkbox", function () {

            var selected = new Array();
            $('input:checked').each(function () {
                selected.push($(this).attr('id'));

            });

            $.ajax({
                url: "/_TableLayout/SetArray/",
                dataType: 'json',
                data: JSON.stringify({ list: selected }),
                type: 'POST',
                contentType: "application/json",
                traditional: true,
                success: successFunc,
                error: error
            });

            function error() {
                //alert("An error has occured!!!");
            }

            function successFunc() {
                // alert();

            }
        });

    </script>

</section>
